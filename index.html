
<head>
  <br>
</head>

<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
  <canvas id="canvas"></canvas>
  <button onclick="ready()">Ready</button>
  <style>
    canvas{
      border:1px solid black;
      width:1000;
      height:600;
    }
  </style>

  <script>
    var c = document.getElementById("canvas");
    var ctx = c.getContext("2d");
    c.width=1000;
    c.height=600;

    blockSize=20;


  var socket = io();
  function ready(){
     socket.emit('ready', "");
  }
  socket.on("boardSize",function(data){
    blockSize=c.width/data.x
  })
  socket.on("gameState",function(data){
    ctx.clearRect(0,0,c.width,c.height)

    ctx.strokeStyle="black"
    ctx.beginPath();
    ctx.arc(data.food.x*blockSize+blockSize/2, data.food.y*blockSize+blockSize/2, blockSize/2.5, 0, 2 * Math.PI);
    ctx.stroke()

    players=data.players
      for(player of Object.entries(players)){
        for(tile of player[1].body){
          if(tile!=undefined){
            ctx.fillStyle=player[1].color
            ctx.fillRect(tile.x*blockSize,tile.y*blockSize,blockSize,blockSize)
          }

        }
      }
  })
  window.onkeydown = function(event) {
     if (event.keyCode == 38) {//up
       socket.emit("turn",[0,-1])
     }else if(event.keyCode == 37){//left
       socket.emit("turn",[-1,0])
     }else if(event.keyCode==39){//right
       socket.emit("turn",[1,0])
     }else if(event.keyCode==40){
       socket.emit("turn",[0,1])
     }
  }
  </script>
</body>
